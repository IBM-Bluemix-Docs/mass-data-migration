---

copyright:
  years: 2017
lastupdated: "2017-12-15"

---
{:new_window: target="_blank"}
{:shortdesc: .shortdesc}

# Netezza データベースを DashDB にマイグレーションする方法

大量データ・マイグレーション・サービス (MDMS) を使用して、大規模な Netezza データベースを DashDB にマイグレーションできます。

本資料は以下について説明しています。
- 大量データ・マイグレーション・サービスによって転送するデータの量を判定するための Netezza ツール
- データを大量データ・マイグレーション・デバイスにエクスポートするためのコマンド

## データベースのサイズ変更
1. [IBM Support: Fix Central - Netezza Tools](https://www-945.ibm.com/support/fixcentral/options?selectionBean.selectedTab=find&selection=ibm%2fInformation+Management%3bPureData+System+for+Analytics%3bibm%2fInformation+Management%2fNetezza+Tools){:new_window} から、ご使用の Netezza インスタンスに対応するバージョンの Netezza ツールをダウンロードしてください。

   **注** - デフォルトでは、サポート・ツールは、Netezza サーバーの /nz/support-IBM_Netezza<version>/bin ディレクトリーにインストールされます。
   
2. 2 つのコマンド (`nz_db_size` と `nz_compressedTableRatio`) を使用します。

  ```
  nz_db_size
  オブジェクト | 名前 | バイト数 | KB | MB | GB | TB
  -----------------------------------------------------------------------------------------------------------
  アプライアンス | cdcntze1 | 23,388,712,337,408 | 22,840,539,392 | 22,305,214 | 21,782.4 | 21.3
  データベース | DHDB | 183,537,500,160 | 179,235,840 | 175,035 | 170.9 | .2
  表 | DH71964I1 | 880,803,840 | 860,160 | 840 | .8 | .0
  表 | DH71964T1 | 96,120,078,336 | 93,867,264 | 91,667 | 89.5 | .1
  表 | DH71964T10 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T2 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T3 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T4 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T5 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T6 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T7 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T8 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  表 | DH71964T9 | 9,615,179,776 | 9,389,824 | 9,170 | 9.0 | .0
  ```
  
  
  ```
  nz_compressedTableRatio
  ....................................................................................
  . 圧縮後の表と圧縮解除後の表のサイズの比率の見積もり値を .
  . 以下にまとめます。圧縮解除後の表は圧縮後の表の約 <比率> 倍 .
  . のサイズになります。.
  . .
  . 「圧縮後のサイズ」は、表で実際に使用するストレージの量です。 .
  . 「圧縮解除後のサイズ」は、数値計算に基づく見積もり値です。 .
  ....................................................................................
  データベース: DHDB
  表/MView 名前 比率 圧縮後のサイズ 圧縮解除後のサイズ サイズの差
  ================== ===== ================ =============== ===========
  DH71964I1 1.49 880,803,840 1,310,723,840 429,920,000
  DH71964T1 1.50 96,120,078,336 144,179,203,840 48,059,125,504
  DH71964T10 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T2 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T3 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T4 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T5 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T6 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T7 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T8 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  DH71964T9 1.50 9,615,179,776 14,417,923,840 4,802,744,064
  ================================ ===== =================== ===================
  このデータベースの合計 1.50 183,537,500,160 275,251,242,240 91,713,742,080
  ```

## データを抽出して保管する手順

Netezza からデータを抽出する方法として、以下の 2 つのオプションがあります。
1. **nz_backup utility** を使用します。

  ```
  /nz/support/contrib/bin/nz_backup –db   {db_name} –d  {target_directory}  ascii threads 4
  ```
   
   **注**: {target_directory} は、このサーバーにマウントした MDMS デバイスの NFS 共有です。
   
2. CREATE EXTERNAL TABLE を使用します。
   - LOAD プロセスでエクスポート/再利用のために使用する「USING」節を DashDB チームに伝えてください。
   - FORMAT として Text を選択してください。
   
   
## データの検証
`USING(....)` を指定して外部表 **myfile** からの選択操作を実行することによって Netezza にデータを再び読み込み、データが正しいかどうかを確認できます。
 
## 追加情報
Netezza の詳細については、[IBM Netezza データベース・ユーザー資料](https://www.ibm.com/support/knowledgecenter/en/SSULQD_7.2.1/com.ibm.nz.dbu.doc/c_dbuser_plg_overview.html){:new_window}を参照してください。
